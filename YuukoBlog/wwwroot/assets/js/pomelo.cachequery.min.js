if(window.Pomelo){Pomelo.CQ={}}var PomeloCQ=function(e){if(e.get){return e}function n(e,n){if(!e){return}var t=Object.getOwnPropertyNames(e);for(var r=0;r<t.length;++r){n[t[r]]=e[t[r]]}}var a={isPagedResult(e){if(e.totalRecords==undefined||e.totalPages===undefined||e.currentPage===undefined||e.pageSize===undefined)return false;else return true},beforeSend:function(e){}};n(window.PueCQOptions||{},a);function i(e){var n=JSON.stringify(e);return JSON.parse(n)}function o(e){var n=[];if(!e||typeof e!=="object")return n;for(var t in e){if(e[t])n.push(t)}return n}var c={};var l={};var f={};var d={};var p={};function t(e){n(e,a)}function u(e,n=true,t=null){var r=Object.keys(e).sort();if(!r.length)return"";var i=n?"?":"";for(var o=0;o<r.length;o++){if(t){if(t.some(e=>e==r[o])){continue}}i+=r[o]+"="+encodeURI(e[r[o]])+"&"}return i.substr(0,i.length-1)}function h(e){e=e.substr(e.indexOf("?")+1);var n=e.split("&");var t={};for(var r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=decodeURI(i[1])}return t}function s(e,n,t){var r=i(n);if(t&&r.page)delete r.page;return e+u(r)}function v(e){return a.isPagedResult(e)}function g(n){var t=new XMLHttpRequest;t.open(n.type,n.url);t.setRequestHeader("Content-Type",n.contentType);if(n.beforeSend){n.beforeSend(t)}if(typeof n.data!=="string"){if(n.contentType.toLocaleLowerCase()=="application/json"){n.data=JSON.stringify(n.data)}else{n.data=u(n.data,false)}}t.send(n.data);t.onreadystatechange=function(){if(t.readyState==4){var e=n.dataType=="json"?JSON.parse(t.responseText):t.responseText;if(t.status>=200&&t.status<300){n.success(e,t)}else{n.error(e,t)}}}}function m(e,r,i,o,f){var n=this;return new Promise(function(n,t){g({url:e,type:r,dataType:o||"json",contentType:f||"application/json",data:r=="GET"?null:i,success:function(e){n(e)},error:function(e){t(e)},beforeSend:function(e){a.beforeSend(e)}})})}function b(e,n,t){var r=Object.getOwnPropertyNames(n||{});if(r.length){if(e.indexOf("?")>=0){e+="&"}else{e+="?"}}for(var i=0;i<r.length;++i){var o=r[i];e+=encodeURIComponent(o)+"="+encodeURIComponent(n[o]||"")+"&"}if(r.length){e=e.substr(0,e.length-1)}return m(e,"GET",n,t)}function r(e,n,t){return m(e,"POST",n,t)}function P(e,n,t){return m(e,"PATCH",n,t)}function y(e,n,t){return m(e,"PUT",n,t)}function O(e,n,t){var r=Object.getOwnPropertyNames(n||{});if(r.length){if(e.indexOf("?")>=0){e+="&"}else{e+="?"}}for(var i=0;i<r.length;++i){var o=r[i];e+=encodeURIComponent(o)+"="+encodeURIComponent(n[o]||"")+"&"}if(r.length){e=e.substr(0,e.length-1)}return m(e,"DELETE",n,t)}function _(e,n){var t=o(n);var r=s(e,n,t.some(e=>e==="page"));if(c[r]){delete c[r]}}function C(e,n,t,r){var i;if(!l[e])l[e]=[];var o=v(t);if(!o){i=s(e,n);c[i]=t}else{i=s(e,n,true);if(!c[i])c[i]={isPaged:true};c[i][t.data.current]=t}if(!l[e].some(e=>e==i))l[e].push(i);if(r)f[i]=(new Date).getTime()+r}function T(e,n,t){var r;if(d[n]){r=d[n]}for(var i=0;i<l[n].length;i++){var o=l[n][i];if(r===undefined){r=function(e){var n=e.item.Id;var t=c[e.key].filter(e=>e.Id==n);if(t.length)return c[e.key].indexOf(t[0]);else return-1}}var f=c[o].isPaged!==undefined;var a=r({isPaged:f,method:e,endpoint:n,item:t,key:o,params:h(o)});var u=false;switch(e){case"PUT":if(!f){if(a>=0){c[o].splice(a,0,t);u=true}}else{if(a[0]>0){c[o][a[0]].splice(a[1],0,t);u=true}}break;case"PATCH":if(!f){a=a<0?c[o].length:a;c[o].splice(a,1);c[o].splice(a,0,t);u=true}else{if(a[0]>=0){a[1]=a[1]<0?c[o].length:a[1];c[o][a[0]].splice(a[1],1);c[o][a[0]].splice(a[1],0,t);u=true}}break;case"DELETE":if(!f){if(a>=0)c[o].splice(a,1);u=true}else{if(a[0]>=0&&a[1]>=0)c[o][a[0]].splice(a[1],1);u=true}break;default:break}if(u){var s=p[o];if(s&&s.length){for(var i=0;i<s.length;i++){try{s[i](f?c[o][a[0]]:c[o])}catch(e){s[i]=null}}p[o]=p[o].filter(e=>e)}}}}function w(e,n){if(d===undefined)d={};d[e]=n}function R(e,n){let t=LazyRouting.GetCurrentComponent();let r=t._uid;if(t){n=function(){let e=LazyRouting.GetCurrentComponent();if(e&&e._uid!=r){return}else{n()}}}if(p[e]===undefined)p[e]=[];p[e].push(n)}function S(i,o,f){if(!o)o={};var e={bindings:[],_subscribe:null,_fetchFunc:null,__cacheInfo:{endpoint:i,params:o},removeCache:function(){_(__cacheInfo.endpoint,__cacheInfo.params)},fetch:function(n){if(this._fetchFunc){var t=this._fetchFunc;this._fetchFunc=function(e){t(e);n(e)}}else{this._fetchFunc=n}var e=o.page;var r=s(i,o,true);if(!c[r]||e!==undefined&&!c[r][e||1]){return b(i,o).then(e=>{C(i,o,e,f);try{if(n){n(e)}}catch(e){console.error(e)}})}else{if(c[r].isPaged){n(c[r][e||1]);return Promise.resolve(c[r][e||1])}else{n(c[r]);return Promise.resolve(c[r])}}},subscribe:function(e,n,t){},unsubscribe:function(){},refresh:function(){_(this.__cacheInfo.endpoint,this.__cacheInfo.params);this.fetch(this._fetchFunc)}};if(f){setInterval(function(){e.refresh()},f)}return e}function I(){c={};l={};f={};d={};p={}}e.GenerateQueryStringFromObject=u;e.GenerateObjectFromQueryString=h;e.XhrRequest=g;e.Request=m;e.Get=b;e.Post=r;e.Put=y;e.Patch=P;e.Delete=O;e.SetOptions=t;e.CreateView=S;e.Subscribe=R;e.Update=T;e.Reset=I;return e}(window.Pomelo?window.Pomelo.CQ:{});